import { useState, useRef, useEffect } from 'react'
import styles from '@/components/sections/Banner/styles.module.css'

const AirplaneIcon = ({ className = '' }) => {
  const [isAnimated, setIsAnimated] = useState(false)
  const ref = useRef<SVGSVGElement>(null)

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting && !isAnimated) {
          setIsAnimated(true)
        }
      },
      { threshold: 0.3 }
    )

    if (ref.current) {
      observer.observe(ref.current)
    }

    return () => observer.disconnect()
  }, [isAnimated])

  return (
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="611" viewBox="0 0 40 611" fill="none" className={className} ref={ref}>
      <line
        x1="20"
        y1="0"
        x2="20"
        y2="611"
        stroke="#BDA05E"
        strokeWidth="1"
        strokeDasharray="8,8"
      />
      <g 
        className={isAnimated ? styles['airplane-animated'] : ''}
        transform="translate(0, 0)" 
        clipPath="url(#clip0_396_1092)"
      >
        <path d="M39.5496 15.4506V12.8022C39.5606 12.3407 39.3408 11.9011 38.9672 11.6264C38.5935 11.3517 38.11 11.2748 37.6704 11.4176L24.11 15.8242V8.40664L29.8243 3.40664C30.132 3.13191 30.3188 2.73631 30.3188 2.31872V1.4396C30.3188 0.989055 30.121 0.58246 29.7694 0.296746C29.4177 0.0220208 28.9672 -0.076878 28.5276 0.0330121L19.7913 2.16488L11.0331 0.0439993C10.6485 -0.0439128 10.2529 0.0110321 9.9232 0.219823C9.50562 0.48356 9.24188 0.956086 9.24188 1.45059V2.31872C9.24188 2.73631 9.42869 3.13191 9.73638 3.40664L15.4397 8.39565L15.4617 15.8022L1.90122 11.4066C1.5166 11.2858 1.08803 11.3297 0.736383 11.5275C0.285833 11.7803 0.0111084 12.2748 0.0111084 12.7913V15.4396C0.0330864 15.8902 0.230889 16.2967 0.582538 16.5715L15.5825 28.2748V39.1099C15.5825 40.022 15.9342 40.8682 16.5825 41.5825C17.3628 42.4945 18.4946 43.011 19.6924 43C19.7254 43 19.7584 43 19.7913 43C19.8243 43 19.8573 43 19.9012 43C21.099 43 22.2199 42.4836 23.0001 41.5715C23.6485 40.8682 23.9891 40 23.9891 39.1099L24.0111 28.2858L38.9891 16.5825C39.2529 16.3737 39.4397 16.077 39.5166 15.7473C39.5386 15.6484 39.5496 15.5495 39.5496 15.4506ZM22.2529 28.1319L22.2309 39.1099C22.2309 39.5825 22.0551 40.011 21.7034 40.3956L21.6704 40.4286C21.2309 40.9561 20.5935 41.2528 19.9232 41.2528C19.8792 41.2528 19.8353 41.2528 19.7803 41.2528H19.6704C18.9891 41.2638 18.3408 40.9671 17.9012 40.4396L17.8683 40.4066C17.6265 40.1429 17.3298 39.7143 17.3298 39.1209V28.1429C17.3188 27.6923 17.11 27.2858 16.7584 27L1.75836 15.2967V13.1978L15.3078 17.5934C15.6924 17.7143 16.121 17.6704 16.4726 17.4726C16.9122 17.2198 17.1979 16.7253 17.1979 16.2198L17.1759 8.27477C17.1759 7.85719 17.0001 7.46158 16.6814 7.18686L10.9781 2.19784V1.8462L19.4287 3.90114C19.6485 3.95608 19.8902 3.95608 20.11 3.90114L28.5715 1.8462V2.20884L22.8683 7.20883C22.5606 7.48356 22.3737 7.89015 22.3737 8.29675V16.2528C22.3628 16.7143 22.5825 17.1539 22.9562 17.4286C23.3298 17.7033 23.8133 17.7803 24.2529 17.6374L37.8133 13.1978V15.2967L22.8023 27C22.5386 27.2088 22.3518 27.5055 22.2748 27.8352C22.2529 27.9341 22.2419 28.033 22.2419 28.1319H22.2529Z" fill="#BDA05E" />
        <path d="M22.2529 28.1319L22.2309 39.1099C22.2309 39.5825 22.0551 40.011 21.7034 40.3956L21.6704 40.4286C21.2309 40.9561 20.5935 41.2528 19.9232 41.2528H19.7803H19.6704C18.9891 41.2638 18.3408 40.9671 17.9012 40.4396L17.8683 40.4066C17.6265 40.1429 17.3298 39.7143 17.3298 39.1209V28.1429C17.3188 27.6923 17.11 27.2858 16.7584 27L1.75836 15.2967V13.1978L15.3078 17.5934C15.6924 17.7143 16.121 17.6704 16.4726 17.4726C16.9122 17.2198 17.1979 16.7253 17.1979 16.2198L17.1759 8.27477C17.1759 7.85719 17.0001 7.46158 16.6814 7.18686L10.9781 2.19784V1.8462L19.4287 3.90114C19.6485 3.95608 19.8902 3.95608 20.11 3.90114L28.5715 1.8462V2.20884L22.8683 7.20883C22.5606 7.48356 22.3737 7.89015 22.3737 8.29675V16.2528C22.3628 16.7143 22.5825 17.1539 22.9562 17.4286C23.3298 17.7033 23.8133 17.7803 24.2529 17.6374L37.8133 13.1978V15.2967L22.8023 27C22.5386 27.2088 22.3518 27.5055 22.2748 27.8352C22.2529 27.9341 22.2419 28.033 22.2419 28.1319H22.2529Z" fill="#BDA05E" />
        <mask id="mask0_396_1092" maskUnits="userSpaceOnUse" x="0" y="0" width="40" height="44">
          <path d="M39.5386 15.4616V12.8132C39.5496 12.3517 39.3298 11.9121 38.9562 11.6374C38.5825 11.3627 38.099 11.2858 37.6595 11.4286L24.099 15.8352V8.41762L29.8133 3.41762C30.121 3.1429 30.3078 2.74729 30.3078 2.32971V1.45059C30.3078 1.00004 30.11 0.593447 29.7584 0.307732C29.4067 0.0330071 28.9562 -0.0658917 28.5166 0.0439984L19.7803 2.17586L11.0221 0.0549856C10.6375 -0.0329265 10.2419 0.0220184 9.91221 0.23081C9.49463 0.494546 9.23089 0.967072 9.23089 1.46158V2.32971C9.23089 2.74729 9.41771 3.1429 9.7254 3.41762L15.4287 8.40663L15.4507 15.8132L1.89023 11.4176C1.50562 11.2967 1.07704 11.3407 0.725397 11.5385C0.274847 11.7913 0.00012207 12.2858 0.00012207 12.8022V15.4506C0.0221001 15.9011 0.219903 16.3077 0.571551 16.5825L15.5716 28.2858V39.1209C15.5716 40.033 15.9232 40.8792 16.5716 41.5934C17.3518 42.5055 18.4836 43.022 19.6814 43.011C19.7144 43.011 19.7474 43.011 19.7803 43.011C19.8133 43.011 19.8463 43.011 19.8902 43.011C21.088 43.011 22.2089 42.4945 22.9891 41.5825C23.6375 40.8792 23.9781 40.011 23.9781 39.1209L24.0001 28.2967L38.9781 16.5934C39.2419 16.3847 39.4287 16.088 39.5056 15.7583C39.5276 15.6594 39.5386 15.5605 39.5386 15.4616ZM22.2419 28.1429L22.2199 39.1209C22.2199 39.5934 22.0441 40.022 21.6924 40.4066L21.6595 40.4396C21.2199 40.9671 20.5825 41.2638 19.9122 41.2638C19.8683 41.2638 19.8243 41.2638 19.7694 41.2638H19.6595C18.9781 41.2748 18.3298 40.9781 17.8902 40.4506L17.8573 40.4176C17.6155 40.1539 17.3188 39.7253 17.3188 39.1319V28.1539C17.3078 27.7033 17.099 27.2967 16.7474 27.011L1.74738 15.3077V13.2088L15.2968 17.6044C15.6814 17.7253 16.11 17.6814 16.4617 17.4836C16.9012 17.2308 17.1869 16.7363 17.1869 16.2308L17.165 8.28575C17.165 7.86817 16.9891 7.47257 16.6705 7.19784L10.9672 2.20883V1.85718L19.4177 3.91213C19.6375 3.96707 19.8792 3.96707 20.099 3.91213L28.5606 1.85718V2.21982L22.8573 7.21982C22.5496 7.49455 22.3628 7.90114 22.3628 8.30773V16.2638C22.3518 16.7253 22.5716 17.1649 22.9452 17.4396C23.3188 17.7143 23.8023 17.7912 24.2419 17.6484L37.8023 13.2088V15.3077L22.7913 27.011C22.5276 27.2198 22.3408 27.5165 22.2639 27.8462C22.2419 27.9451 22.2309 28.044 22.2309 28.1429H22.2419Z" fill="#DDDDDB" />
          <path d="M22.2419 28.1429L22.2199 39.1209C22.2199 39.5934 22.0441 40.022 21.6924 40.4066L21.6595 40.4396C21.2199 40.9671 20.5825 41.2638 19.9122 41.2638H19.7694H19.6595C18.9781 41.2748 18.3298 40.9781 17.8902 40.4506L17.8573 40.4176C17.6155 40.1539 17.3188 39.7253 17.3188 39.1319V28.1539C17.3078 27.7033 17.099 27.2967 16.7474 27.011L1.74738 15.3077V13.2088L15.2968 17.6044C15.6814 17.7253 16.11 17.6814 16.4617 17.4836C16.9012 17.2308 17.1869 16.7363 17.1869 16.2308L17.165 8.28575C17.165 7.86817 16.9891 7.47257 16.6705 7.19784L10.9672 2.20883V1.85718L19.4177 3.91213C19.6375 3.96707 19.8792 3.96707 20.099 3.91213L28.5606 1.85718V2.21982L22.8573 7.21982C22.5496 7.49455 22.3628 7.90114 22.3628 8.30773V16.2638C22.3518 16.7253 22.5716 17.1649 22.9452 17.4396C23.3188 17.7143 23.8023 17.7912 24.2419 17.6484L37.8023 13.2088V15.3077L22.7913 27.011C22.5276 27.2198 22.3408 27.5165 22.2639 27.8462C22.2419 27.9451 22.2309 28.044 22.2309 28.1429H22.2419Z" fill="#DDDDDB" />
        </mask>
        <g mask="url(#mask0_396_1092)">
          <rect x="-4.43945" y="-12" width="24" height="63" fill="#383841" />
        </g>
      </g>
    </svg>
  )
}
export default AirplaneIcon